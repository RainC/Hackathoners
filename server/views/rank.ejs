<!DOCTYPE html>
<html>

<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="scripts/custom_time.js"></script>
    <style>

    @import url(https://spoqa.github.io/spoqa-han-sans/css/SpoqaHanSans-kr.css);
    * {
        margin: 0;
        padding: 0;
    }

    html, body {
        width: 100%;
        height: 100%;
        background: #B77DEF;
    }

    #wrapper {
        margin: 0 auto;
        width: 0;
        height: 100%;
        background: #B77DEF;
    }

    .box {
        font-family:  'Spoqa Han Sans', 'Spoqa Han Sans KR', 'Sans-serif';
        font-weight: 800;
        position: absolute;
        z-index: 2;
    }

    </style>
</head>

<body onload="init();">
    <div id="wrapper">
        <img
            id="img_rank"
            src="./resources/rank.png"
            style="position: absolute; left: 0%; top: 0%; height: 100%; z-index: 2;">

        <!-- mini timer -->
        <div class="box" id="mini-timer" style="font-weight: 500"><a>2017년 3월 19일 일요일_오후 04시 37분</a></div>
        <!-- rank - 1 -->
        <div class="box"><a>LecRec</a></div>
        <div class="box"><a>총 35회, CPH 5회</a></div>
        <!-- rank - 2 -->
        <div class="box"><a>국민택시</a></div>
        <div class="box"><a>총 28회, CPH 4회</a></div>
        <!-- rank - 3 -->
        <div class="box"><a>국고나라 사기꾼</a></div>
        <div class="box"><a>총 25회, CPH 3회</a></div>
        <!-- rank - 4 -->
        <div class="box"><a>돌려방</a></div>
        <div class="box"><a>총 22회, CPH 3회</a></div>
        <!-- rank - 5 -->
        <div class="box"><a>WorkHard</a></div>
        <div class="box"><a>총 16회, CPH 2회</a></div>
        <!-- rank - 6 -->
        <div class="box"><a>TDD Hub</a></div>
        <div class="box"><a>총 10회, CPH 4회</a></div>


    </div>
</body>


<script>
var img_date_left = 0;
var rank123_tab = 0.02;
var rank456_tab = 0.016;
// hor 가로, ver 세로
var div_box_ltwh = [
    // 미니 타이머
    [0.7247, 0.0422, 0.2450, 0.0288, 'hor'],
    // 1 등
    [0.1609, 0.2653 + rank123_tab, 0.2367, 0.0705, 'ver-align-hor'],
    [0.1609, 0.3653 + rank123_tab, 0.2367, 0.0305, 'ver-align-hor'],
    // 2 등
    [0.3820, 0.3906 + rank123_tab, 0.2594, 0.0705, 'ver-align-hor'],
    [0.3820, 0.4906 + rank123_tab, 0.2594, 0.0305, 'ver-align-hor'],
    // 3 등
    [0.6047, 0.2988 + rank123_tab, 0.3125, 0.0705, 'ver-align-hor'],
    [0.6047, 0.3988 + rank123_tab, 0.3125, 0.0305, 'ver-align-hor'],
    // 4 등
    [0.2195, 0.7294 + rank456_tab, 0.3125, 0.0305, 'ver'],
    [0.2195, 0.7694 + rank456_tab, 0.3125, 0.0305, 'ver'],
    // 5 등
    [0.4680, 0.7294 + rank456_tab, 0.3125, 0.0305, 'ver'],
    [0.4680, 0.7694 + rank456_tab, 0.3125, 0.0305, 'ver'],
    // 6 등
    [0.7000, 0.7294 + rank456_tab, 0.3125, 0.0305, 'ver'],
    [0.7000, 0.7694 + rank456_tab, 0.3125, 0.0305, 'ver'],
];

function init() {
    var bodyWidth = $('body').width();
    var bodyHeight = $('body').height();

    var wrapHeight = $('#wrapper').height();
    var wrapWidth = 1.505882352941176 * wrapHeight;

    $('#wrapper').width(wrapWidth);

    $("#img_rank").css("left", (bodyWidth - wrapWidth)/2 + wrapWidth * img_date_left);

    $( '.box' ).each(function ( i, box ) {
        $( box ).css("left", (bodyWidth - wrapWidth)/2 + wrapWidth * div_box_ltwh[i][0]);
        $( box ).css("top", wrapHeight * div_box_ltwh[i][1]);


        var html = '<span style="white-space:nowrap"></span>',
            line = $( box ).wrapInner( html ).children()[ 0 ],
            n = 200;

        if (div_box_ltwh[i][4] === 'hor') {
            $( box ).css("width", wrapWidth * div_box_ltwh[i][2]);
            var width = $( box ).width();

            $( box ).css( 'font-size', n );

            while ( $( line ).width() > width ) {
                $( box ).css( 'font-size', --n );
            }
        } else if (div_box_ltwh[i][4] === 'ver-align-hor') {
            $( box ).css("height", wrapHeight * div_box_ltwh[i][3]);
            var height = $( box ).height();

            $( box ).css( 'font-size', n );

            while ( $( line ).height() > height ) {
                $( box ).css( 'font-size', --n );
            }
            $( box ).css("width", wrapWidth * div_box_ltwh[i][2]);
            $( box ).css('text-align', 'center');

        } else {
            $( box ).css("height", wrapHeight * div_box_ltwh[i][3]);
            var height = $( box ).height();

            $( box ).css( 'font-size', n );

            while ( $( line ).height() > height ) {
                $( box ).css( 'font-size', --n );
            }
        }


        $( box ).text( $( line ).text() );

    });
}

window.addEventListener('resize', function(event){
    init();
});

window.onload = function() {
    printMiniTime();
    init();
}

function printCustomTime(now) {

}

</script>

</html>
